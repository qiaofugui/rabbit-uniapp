import{a6 as e,s as t,a7 as s,A as a,z as i}from"./index-92dffa4f.js";const o={invoke(e){var s;e.url.startsWith("http")||(e.url="https://pcapi-xiaotuxian-front-devtest.itheima.net"+e.url),e.timeout=1e4,e.header={...e.header,"source-client":"miniapp"};const a=null==(s=t().profile)?void 0:s.token;a&&(e.header.Authorization=a)}};e("request",o),e("uploadFile",o);const n=e=>new Promise(((o,n)=>{s({...e,success(e){if(e.statusCode>=200&&e.statusCode<300)o(e.data);else if(401===e.statusCode){t().clearProfile(),a({url:"/pages/login/login"}),n(e)}else i({icon:"none",title:e.data.msg||"请求错误"}),n(e)},fail(e){i({icon:"none",title:"网络错误，换个网络试试"}),n(e)}})}));export{n as h};
