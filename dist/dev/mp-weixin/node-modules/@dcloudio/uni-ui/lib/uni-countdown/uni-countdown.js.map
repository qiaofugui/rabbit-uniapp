{"version":3,"file":"uni-countdown.js","sources":["../../../../../../../../node_modules/@dcloudio/uni-ui/lib/uni-countdown/uni-countdown.vue","../../../../../../../../uniComponent:/RTovVGVtcC91bmlhcHAvcmFiYml0LXVuaWFwcC9ub2RlX21vZHVsZXMvQGRjbG91ZGlvL3VuaS11aS9saWIvdW5pLWNvdW50ZG93bi91bmktY291bnRkb3duLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"uni-countdown\">\r\n\t\t<text v-if=\"showDay\" :style=\"[timeStyle]\" class=\"uni-countdown__number\">{{ d }}</text>\r\n\t\t<text v-if=\"showDay\" :style=\"[splitorStyle]\" class=\"uni-countdown__splitor\">{{dayText}}</text>\r\n\t\t<text :style=\"[timeStyle]\" class=\"uni-countdown__number\">{{ h }}</text>\r\n\t\t<text :style=\"[splitorStyle]\" class=\"uni-countdown__splitor\">{{ showColon ? ':' : hourText }}</text>\r\n\t\t<text :style=\"[timeStyle]\" class=\"uni-countdown__number\">{{ i }}</text>\r\n\t\t<text :style=\"[splitorStyle]\" class=\"uni-countdown__splitor\">{{ showColon ? ':' : minuteText }}</text>\r\n\t\t<text :style=\"[timeStyle]\" class=\"uni-countdown__number\">{{ s }}</text>\r\n\t\t<text v-if=\"!showColon\" :style=\"[splitorStyle]\" class=\"uni-countdown__splitor\">{{secondText}}</text>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tinitVueI18n\r\n\t} from '@dcloudio/uni-i18n'\r\n\timport messages from './i18n/index.js'\r\n\tconst {\r\n\t\tt\r\n\t} = initVueI18n(messages)\r\n\t/**\r\n\t * Countdown 倒计时\r\n\t * @description 倒计时组件\r\n\t * @tutorial https://ext.dcloud.net.cn/plugin?id=25\r\n\t * @property {String} backgroundColor 背景色\r\n\t * @property {String} color 文字颜色\r\n\t * @property {Number} day 天数\r\n\t * @property {Number} hour 小时\r\n\t * @property {Number} minute 分钟\r\n\t * @property {Number} second 秒\r\n\t * @property {Number} timestamp 时间戳\r\n\t * @property {Boolean} showDay = [true|false] 是否显示天数\r\n\t * @property {Boolean} show-colon = [true|false] 是否以冒号为分隔符\r\n\t * @property {String} splitorColor 分割符号颜色\r\n\t * @event {Function} timeup 倒计时时间到触发事件\r\n\t * @example <uni-countdown :day=\"1\" :hour=\"1\" :minute=\"12\" :second=\"40\"></uni-countdown>\r\n\t */\r\n\texport default {\r\n\t\tname: 'UniCountdown',\r\n\t\temits: ['timeup'],\r\n\t\tprops: {\r\n\t\t\tshowDay: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tshowColon: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tstart: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tbackgroundColor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\tcolor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#333'\r\n\t\t\t},\r\n\t\t\tfontSize: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 14\r\n\t\t\t},\r\n\t\t\tsplitorColor: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#333'\r\n\t\t\t},\r\n\t\t\tday: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\thour: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tminute: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tsecond: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\ttimestamp: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n      zeroPad: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tsyncFlag: false,\r\n\t\t\t\td: '00',\r\n\t\t\t\th: '00',\r\n\t\t\t\ti: '00',\r\n\t\t\t\ts: '00',\r\n\t\t\t\tleftTime: 0,\r\n\t\t\t\tseconds: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tdayText() {\r\n\t\t\t\treturn t(\"uni-countdown.day\")\r\n\t\t\t},\r\n\t\t\thourText(val) {\r\n\t\t\t\treturn t(\"uni-countdown.h\")\r\n\t\t\t},\r\n\t\t\tminuteText(val) {\r\n\t\t\t\treturn t(\"uni-countdown.m\")\r\n\t\t\t},\r\n\t\t\tsecondText(val) {\r\n\t\t\t\treturn t(\"uni-countdown.s\")\r\n\t\t\t},\r\n\t\t\ttimeStyle() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tbackgroundColor,\r\n\t\t\t\t\tfontSize\r\n\t\t\t\t} = this\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tbackgroundColor,\r\n\t\t\t\t\tfontSize: `${fontSize}px`,\r\n\t\t\t\t\twidth: `${fontSize * 22 / 14}px`, // 按字体大小为 14px 时的比例缩放\r\n \t\t\t\t\tlineHeight: `${fontSize * 20 / 14}px`,\r\n\t\t\t\t\tborderRadius: `${fontSize * 3 / 14}px`,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsplitorStyle() {\r\n\t\t\t\tconst { splitorColor, fontSize, backgroundColor } = this\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcolor: splitorColor,\r\n\t\t\t\t\tfontSize: `${fontSize * 12 / 14}px`,\r\n\t\t\t\t\tmargin: backgroundColor ? `${fontSize * 4 / 14}px` : ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tday(val) {\r\n\t\t\t\tthis.changeFlag()\r\n\t\t\t},\r\n\t\t\thour(val) {\r\n\t\t\t\tthis.changeFlag()\r\n\t\t\t},\r\n\t\t\tminute(val) {\r\n\t\t\t\tthis.changeFlag()\r\n\t\t\t},\r\n\t\t\tsecond(val) {\r\n\t\t\t\tthis.changeFlag()\r\n\t\t\t},\r\n\t\t\tstart: {\r\n\t\t\t\timmediate: true,\r\n\t\t\t\thandler(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tthis.startData();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (!oldVal) return\r\n\t\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated: function(e) {\r\n\t\t\tthis.seconds = this.toSeconds(this.timestamp, this.day, this.hour, this.minute, this.second)\r\n\t\t\tthis.countDown()\r\n\t\t},\r\n\t\t// #ifndef VUE3\r\n\t\tdestroyed() {\r\n\t\t\tclearInterval(this.timer)\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifdef VUE3\r\n\t\tunmounted() {\r\n\t\t\tclearInterval(this.timer)\r\n\t\t},\r\n\t\t// #endif\r\n\t\tmethods: {\r\n\t\t\ttoSeconds(timestamp, day, hours, minutes, seconds) {\r\n\t\t\t\tif (timestamp) {\r\n\t\t\t\t\treturn timestamp - parseInt(new Date().getTime() / 1000, 10)\r\n\t\t\t\t}\r\n\t\t\t\treturn day * 60 * 60 * 24 + hours * 60 * 60 + minutes * 60 + seconds\r\n\t\t\t},\r\n\t\t\ttimeUp() {\r\n\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\tthis.$emit('timeup')\r\n\t\t\t},\r\n\t\t\tcountDown() {\r\n\t\t\t\tlet seconds = this.seconds\r\n\t\t\t\tlet [day, hour, minute, second] = [0, 0, 0, 0]\r\n\t\t\t\tif (seconds > 0) {\r\n\t\t\t\t\tday = Math.floor(seconds / (60 * 60 * 24))\r\n\t\t\t\t\thour = Math.floor(seconds / (60 * 60)) - (day * 24)\r\n\t\t\t\t\tminute = Math.floor(seconds / 60) - (day * 24 * 60) - (hour * 60)\r\n\t\t\t\t\tsecond = Math.floor(seconds) - (day * 24 * 60 * 60) - (hour * 60 * 60) - (minute * 60)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.timeUp()\r\n\t\t\t\t}\r\n        day = (day < 10 && this.zeroPad) ? `0${day}` : day\r\n\t\t\t\thour = (hour < 10 && this.zeroPad) ? `0${hour}` : hour\r\n\t\t\t\tminute = (minute < 10 && this.zeroPad) ? `0${minute}` : minute\r\n\t\t\t\tsecond = (second < 10 && this.zeroPad) ? `0${second}` : second\r\n\t\t\t\tthis.d = day\r\n\t\t\t\tthis.h = hour\r\n\t\t\t\tthis.i = minute\r\n\t\t\t\tthis.s = second\r\n\t\t\t},\r\n\t\t\tstartData() {\r\n\t\t\t\tthis.seconds = this.toSeconds(this.timestamp, this.day, this.hour, this.minute, this.second)\r\n\t\t\t\tif (this.seconds <= 0) {\r\n\t\t\t\t\tthis.seconds = this.toSeconds(0, 0, 0, 0, 0)\r\n\t\t\t\t\tthis.countDown()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\tthis.countDown()\r\n\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t\tthis.seconds--\r\n\t\t\t\t\tif (this.seconds < 0) {\r\n\t\t\t\t\t\tthis.timeUp()\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.countDown()\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\tupdate(){\r\n\t\t\t\tthis.startData();\r\n\t\t\t},\r\n\t\t\tchangeFlag() {\r\n\t\t\t\tif (!this.syncFlag) {\r\n\t\t\t\t\tthis.seconds = this.toSeconds(this.timestamp, this.day, this.hour, this.minute, this.second)\r\n\t\t\t\t\tthis.startData();\r\n\t\t\t\t\tthis.syncFlag = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t$font-size: 14px;\r\n\r\n\t.uni-countdown {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\r\n\t\t&__splitor {\r\n\t\t\tmargin: 0 2px;\r\n\t\t\tfont-size: $font-size;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\r\n\t\t&__number {\r\n\t\t\tborder-radius: 3px;\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: $font-size;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import Component from 'E:/Temp/uniapp/rabbit-uniapp/node_modules/@dcloudio/uni-ui/lib/uni-countdown/uni-countdown.vue'\nwx.createComponent(Component)"],"names":["initVueI18n","messages"],"mappings":";;AAiBC,MAAM;AAAA,EACL;IACGA,cAAAA,YAAYC,cAAAA,QAAQ;AAkBxB,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,OAAO,CAAC,QAAQ;AAAA,EAChB,OAAO;AAAA,IACN,SAAS;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,WAAW;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,OAAO;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,iBAAiB;AAAA,MAChB,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,OAAO;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,UAAU;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,cAAc;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,KAAK;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,MAAM;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,QAAQ;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,QAAQ;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,WAAW;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACE,SAAS;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,UAAU;AAAA,MACV,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,UAAU;AAAA,MACV,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,UAAU;AACT,aAAO,EAAE,mBAAmB;AAAA,IAC5B;AAAA,IACD,SAAS,KAAK;AACb,aAAO,EAAE,iBAAiB;AAAA,IAC1B;AAAA,IACD,WAAW,KAAK;AACf,aAAO,EAAE,iBAAiB;AAAA,IAC1B;AAAA,IACD,WAAW,KAAK;AACf,aAAO,EAAE,iBAAiB;AAAA,IAC1B;AAAA,IACD,YAAY;AACX,YAAM;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,UACG;AACJ,aAAO;AAAA,QACN;AAAA,QACA;AAAA,QACA,UAAU,GAAG;AAAA,QACb,OAAO,GAAG,WAAW,KAAK;AAAA;AAAA,QACzB,YAAY,GAAG,WAAW,KAAK;AAAA,QAChC,cAAc,GAAG,WAAW,IAAI;AAAA,MACjC;AAAA,IACA;AAAA,IACD,eAAe;AACd,YAAM,EAAE,cAAc,UAAU,gBAAkB,IAAE;AACpD,aAAO;AAAA,QACN,OAAO;AAAA,QACP,UAAU,GAAG,WAAW,KAAK;AAAA,QAC7B,QAAQ,kBAAkB,GAAG,WAAW,IAAI,SAAS;AAAA,MACtD;AAAA,IACD;AAAA,EACA;AAAA,EACD,OAAO;AAAA,IACN,IAAI,KAAK;AACR,WAAK,WAAW;AAAA,IAChB;AAAA,IACD,KAAK,KAAK;AACT,WAAK,WAAW;AAAA,IAChB;AAAA,IACD,OAAO,KAAK;AACX,WAAK,WAAW;AAAA,IAChB;AAAA,IACD,OAAO,KAAK;AACX,WAAK,WAAW;AAAA,IAChB;AAAA,IACD,OAAO;AAAA,MACN,WAAW;AAAA,MACX,QAAQ,QAAQ,QAAQ;AACvB,YAAI,QAAQ;AACX,eAAK,UAAS;AAAA,eACR;AACN,cAAI,CAAC;AAAQ;AACb,wBAAc,KAAK,KAAK;AAAA,QACzB;AAAA,MACD;AAAA,IAED;AAAA,EACA;AAAA,EACD,SAAS,SAAS,GAAG;AACpB,SAAK,UAAU,KAAK,UAAU,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,KAAK,QAAQ,KAAK,MAAM;AAC3F,SAAK,UAAU;AAAA,EACf;AAAA,EAOD,YAAY;AACX,kBAAc,KAAK,KAAK;AAAA,EACxB;AAAA,EAED,SAAS;AAAA,IACR,UAAU,WAAW,KAAK,OAAO,SAAS,SAAS;AAClD,UAAI,WAAW;AACd,eAAO,YAAY,SAAS,IAAI,KAAM,EAAC,QAAQ,IAAI,KAAM,EAAE;AAAA,MAC5D;AACA,aAAO,MAAM,KAAK,KAAK,KAAK,QAAQ,KAAK,KAAK,UAAU,KAAK;AAAA,IAC7D;AAAA,IACD,SAAS;AACR,oBAAc,KAAK,KAAK;AACxB,WAAK,MAAM,QAAQ;AAAA,IACnB;AAAA,IACD,YAAY;AACX,UAAI,UAAU,KAAK;AACnB,UAAI,CAAC,KAAK,MAAM,QAAQ,MAAM,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AAC7C,UAAI,UAAU,GAAG;AAChB,cAAM,KAAK,MAAM,WAAW,KAAK,KAAK,GAAG;AACzC,eAAO,KAAK,MAAM,WAAW,KAAK,GAAG,IAAK,MAAM;AAChD,iBAAS,KAAK,MAAM,UAAU,EAAE,IAAK,MAAM,KAAK,KAAO,OAAO;AAC9D,iBAAS,KAAK,MAAM,OAAO,IAAK,MAAM,KAAK,KAAK,KAAO,OAAO,KAAK,KAAO,SAAS;AAAA,aAC7E;AACN,aAAK,OAAO;AAAA,MACb;AACI,YAAO,MAAM,MAAM,KAAK,UAAW,IAAI,QAAQ;AACnD,aAAQ,OAAO,MAAM,KAAK,UAAW,IAAI,SAAS;AAClD,eAAU,SAAS,MAAM,KAAK,UAAW,IAAI,WAAW;AACxD,eAAU,SAAS,MAAM,KAAK,UAAW,IAAI,WAAW;AACxD,WAAK,IAAI;AACT,WAAK,IAAI;AACT,WAAK,IAAI;AACT,WAAK,IAAI;AAAA,IACT;AAAA,IACD,YAAY;AACX,WAAK,UAAU,KAAK,UAAU,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,KAAK,QAAQ,KAAK,MAAM;AAC3F,UAAI,KAAK,WAAW,GAAG;AACtB,aAAK,UAAU,KAAK,UAAU,GAAG,GAAG,GAAG,GAAG,CAAC;AAC3C,aAAK,UAAU;AACf;AAAA,MACD;AACA,oBAAc,KAAK,KAAK;AACxB,WAAK,UAAU;AACf,WAAK,QAAQ,YAAY,MAAM;AAC9B,aAAK;AACL,YAAI,KAAK,UAAU,GAAG;AACrB,eAAK,OAAO;AACZ;AAAA,QACD;AACA,aAAK,UAAU;AAAA,MACf,GAAE,GAAI;AAAA,IACP;AAAA,IACD,SAAQ;AACP,WAAK,UAAS;AAAA,IACd;AAAA,IACD,aAAa;AACZ,UAAI,CAAC,KAAK,UAAU;AACnB,aAAK,UAAU,KAAK,UAAU,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,KAAK,QAAQ,KAAK,MAAM;AAC3F,aAAK,UAAS;AACd,aAAK,WAAW;AAAA,MACjB;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClPD,GAAG,gBAAgB,SAAS;","x_google_ignoreList":[0]}