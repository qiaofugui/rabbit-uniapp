{"version":3,"file":"category.js","sources":["../../../../../src/pages/category/category.vue","../../../../../uniPage:/cGFnZXMvY2F0ZWdvcnkvY2F0ZWdvcnkudnVl"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport type { BannerItem } from '@/types/home';\r\nimport { ref, computed } from 'vue'\r\nimport { getHomeBannerAPI } from '@/services/home';\r\nimport { onLoad } from '@dcloudio/uni-app';\r\nimport { getCategoryTopAPI } from '@/services/category'\r\nimport type { CategoryTopItem } from '@/types/category'\r\nimport PageSkeleton from './components/PageSkeleton.vue'\r\n\r\n// 获取轮播图数据\r\nconst bannerList = ref<BannerItem[]>([])\r\nconst getBannerData = async () => {\r\n  const res = await getHomeBannerAPI(2)\r\n  bannerList.value = res.result\r\n}\r\n\r\n// 获取分类列表数据\r\nconst categoryList = ref<CategoryTopItem[]>([])\r\nconst activeIndex = ref(0)\r\nconst getCategoryTopData = async () => {\r\n  const res = await getCategoryTopAPI()\r\n  categoryList.value = res.result\r\n}\r\n\r\n// 骨架屏\r\nconst isFinish = ref(false)\r\n// 页面加载\r\nonLoad(async () => {\r\n  isFinish.value = true\r\n  await Promise.all([getBannerData(), getCategoryTopData()])\r\n  isFinish.value = false\r\n})\r\n\r\n// 提取二级分类数据\r\nconst subCategoryList = computed(() => {\r\n  return categoryList.value[activeIndex.value]?.children || []\r\n})\r\n</script>\r\n\r\n<template>\r\n  <view class=\"viewport\" v-if=\"!isFinish\">\r\n    <!-- 搜索框 -->\r\n    <view class=\"search\">\r\n      <view class=\"input\">\r\n        <text class=\"icon-search\">女靴</text>\r\n      </view>\r\n    </view>\r\n    <!-- 分类 -->\r\n    <view class=\"categories\">\r\n      <!-- 左侧：一级分类 -->\r\n      <scroll-view class=\"primary\" scroll-y>\r\n        <view v-for=\"(item, index) in categoryList\" :key=\"item.id\" class=\"item\" :class=\"{ active: index === activeIndex }\" @tap=\"activeIndex = index\">\r\n          <text class=\"name\"> {{ item.name }} </text>\r\n        </view>\r\n      </scroll-view>\r\n      <!-- 右侧：二级分类 -->\r\n      <scroll-view class=\"secondary\" scroll-y>\r\n        <!-- 焦点图 -->\r\n        <XtxSwiper class=\"banner\" :list=\"bannerList\" />\r\n        <!-- 内容区域 -->\r\n        <view class=\"panel\" v-for=\"item in subCategoryList\" :key=\"item.id\">\r\n          <view class=\"title\">\r\n            <text class=\"name\">{{item.name}}</text>\r\n            <navigator class=\"more\" hover-class=\"none\">全部</navigator>\r\n          </view>\r\n          <view class=\"section\">\r\n            <navigator v-for=\"goods in item.goods\" :key=\"goods.id\" class=\"goods\" hover-class=\"none\" :url=\"`/pages/goods/goods?id=${goods.id}`\">\r\n              <image class=\"image\" :src=\"goods.picture\"></image>\r\n              <view class=\"name ellipsis\">{{goods.name}}</view>\r\n              <view class=\"price\">\r\n                <text class=\"symbol\">¥</text>\r\n                <text class=\"number\">{{goods.price}}</text>\r\n              </view>\r\n            </navigator>\r\n          </view>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n  </view>\r\n  <PageSkeleton v-else/>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\npage {\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.viewport {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.search {\r\n  padding: 0 30rpx 20rpx;\r\n  background-color: #fff;\r\n\r\n  .input {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    height: 64rpx;\r\n    padding-left: 26rpx;\r\n    color: #8b8b8b;\r\n    font-size: 28rpx;\r\n    border-radius: 32rpx;\r\n    background-color: #f3f4f4;\r\n  }\r\n}\r\n\r\n.icon-search {\r\n  &::before {\r\n    margin-right: 10rpx;\r\n  }\r\n}\r\n\r\n/* 分类 */\r\n.categories {\r\n  flex: 1;\r\n  min-height: 400rpx;\r\n  display: flex;\r\n}\r\n\r\n/* 一级分类 */\r\n.primary {\r\n  overflow: hidden;\r\n  width: 180rpx;\r\n  flex: none;\r\n  background-color: #f6f6f6;\r\n\r\n  .item {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 96rpx;\r\n    font-size: 26rpx;\r\n    color: #595c63;\r\n    position: relative;\r\n\r\n    &::after {\r\n      content: '';\r\n      position: absolute;\r\n      left: 42rpx;\r\n      bottom: 0;\r\n      width: 96rpx;\r\n      border-top: 1rpx solid #e3e4e7;\r\n    }\r\n  }\r\n\r\n  .active {\r\n    background-color: #fff;\r\n\r\n    &::before {\r\n      content: '';\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      width: 8rpx;\r\n      height: 100%;\r\n      background-color: #27ba9b;\r\n    }\r\n  }\r\n}\r\n\r\n.primary .item:last-child::after,\r\n.primary .active::after {\r\n  display: none;\r\n}\r\n\r\n/* 二级分类 */\r\n.secondary {\r\n  background-color: #fff;\r\n\r\n  .carousel {\r\n    height: 200rpx;\r\n    margin: 0 30rpx 20rpx;\r\n    border-radius: 4rpx;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .panel {\r\n    margin: 0 30rpx 0rpx;\r\n  }\r\n\r\n  .title {\r\n    height: 60rpx;\r\n    line-height: 60rpx;\r\n    color: #333;\r\n    font-size: 28rpx;\r\n    border-bottom: 1rpx solid #f7f7f8;\r\n\r\n    .more {\r\n      float: right;\r\n      padding-left: 20rpx;\r\n      font-size: 24rpx;\r\n      color: #999;\r\n    }\r\n  }\r\n\r\n  .more {\r\n    &::after {\r\n      font-family: 'erabbit' !important;\r\n      content: '\\e6c2';\r\n    }\r\n  }\r\n\r\n  .section {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding: 20rpx 0;\r\n\r\n    .goods {\r\n      width: 150rpx;\r\n      margin: 0rpx 30rpx 20rpx 0;\r\n\r\n      &:nth-child(3n) {\r\n        margin-right: 0;\r\n      }\r\n\r\n      image {\r\n        width: 150rpx;\r\n        height: 150rpx;\r\n      }\r\n\r\n      .name {\r\n        padding: 5rpx;\r\n        font-size: 22rpx;\r\n        color: #333;\r\n      }\r\n\r\n      .price {\r\n        padding: 5rpx;\r\n        font-size: 18rpx;\r\n        color: #cf4444;\r\n      }\r\n\r\n      .number {\r\n        font-size: 24rpx;\r\n        margin-left: 2rpx;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Temp/uniapp/rabbit-uniapp/src/pages/category/category.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getCategoryTopAPI","onLoad","computed"],"mappings":";;;;;;;;;;;;;;;AAOA,MAAA,eAAyB,MAAA;;;;AAGnB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACvC,UAAM,gBAAgB,YAAY;AAC1B,YAAA,MAAM,MAAMC,+BAAiB,CAAC;AACpC,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAInB,UAAA,eAAeD,kBAAuB,CAAA,CAAE;AACxC,UAAA,cAAcA,kBAAI,CAAC;AACzB,UAAM,qBAAqB,YAAY;AAC/B,YAAA,MAAM,MAAME,kBAAAA;AAClB,mBAAa,QAAQ,IAAI;AAAA,IAAA;AAIrB,UAAA,WAAWF,kBAAI,KAAK;AAE1BG,kBAAAA,OAAO,YAAY;AACjB,eAAS,QAAQ;AACjB,YAAM,QAAQ,IAAI,CAAC,iBAAiB,mBAAoB,CAAA,CAAC;AACzD,eAAS,QAAQ;AAAA,IAAA,CAClB;AAGK,UAAA,kBAAkBC,cAAAA,SAAS,MAAM;;AACrC,eAAO,kBAAa,MAAM,YAAY,KAAK,MAApC,mBAAuC,aAAY;IAAC,CAC5D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCD,GAAG,WAAW,eAAe;"}