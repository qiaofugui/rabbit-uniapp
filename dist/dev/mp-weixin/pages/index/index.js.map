{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport {\r\n  getHomeBannerAPI,\r\n  getHomeCategoryAPI,\r\n  getHomeHotRecommendAPI,\r\n} from '@/services/home'\r\nimport CustomNavbar from './components/CustomNavbar.vue'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport type { BannerItem, CategoryItem, HotRecommendItem } from '@/types/home'\r\n\r\nimport CategoryPanel from './components/CategoryPanel.vue'\r\nimport HotPanel from './components/HotPanel.vue'\r\nimport PageSkeleton from './components/PageSkeleton.vue'\r\n\r\nimport { useGuessList } from '@/composables/index'\r\n\r\n// 是否加载中\r\nconst isLoading = ref(false)\r\n\r\n// 轮播图数据\r\nconst bannerList = ref<BannerItem[]>([])\r\nconst getHomeBannerData = async () => {\r\n  const res = await getHomeBannerAPI()\r\n  bannerList.value = res.result\r\n}\r\n\r\n// 分类面板数据\r\nconst categoryList = ref<CategoryItem[]>([])\r\nconst getHomeCategoryData = async () => {\r\n  const res = await getHomeCategoryAPI()\r\n  categoryList.value = res.result\r\n}\r\n\r\n// 热门推荐数据\r\nconst hotRecommendList = ref<HotRecommendItem[]>([])\r\nconst getHomeHotRecommendData = async () => {\r\n  const res = await getHomeHotRecommendAPI()\r\n  hotRecommendList.value = res.result\r\n}\r\n\r\nonLoad(async () => {\r\n  isLoading.value = true\r\n  await Promise.all([\r\n    getHomeBannerData(),\r\n    getHomeCategoryData(),\r\n    getHomeHotRecommendData()\r\n  ])\r\n  isLoading.value = false\r\n})\r\n\r\n// 滚动到底部加载更多\r\nconst { guessRef, onScrolltolower } =useGuessList()\r\n// 自定义下拉刷新被触发\r\nconst isTriggered = ref(false)\r\nconst onRefresherrefresh = async () => {\r\n  isTriggered.value = true\r\n  isLoading.value = true\r\n  guessRef.value?.resetDate\r\n  await Promise.all([\r\n    getHomeBannerData(),\r\n    getHomeCategoryData(),\r\n    getHomeHotRecommendData(),\r\n    guessRef.value?.getGuessYouLikeData(),\r\n  ])\r\n  isTriggered.value = false\r\n  isLoading.value = false\r\n}\r\n</script>\r\n\r\n<template>\r\n  <!-- 自定义导航栏 -->\r\n  <CustomNavbar />\r\n\r\n  <!-- 滚动容器 -->\r\n  <scroll-view refresher-enabled :refresher-triggered=\"isTriggered\" class=\"scroll-view\" scroll-y\r\n    @scrolltolower=\"onScrolltolower\" @refresherrefresh=\"onRefresherrefresh\">\r\n\r\n    <!-- 骨架屏幕 -->\r\n    <PageSkeleton v-if=\"isLoading\" />\r\n\r\n    <template v-else>\r\n      <!-- 轮播图 -->\r\n      <XtxSwiper :list=\"bannerList\" />\r\n\r\n      <!-- 分类面板 -->\r\n      <CategoryPanel :list=\"categoryList\" />\r\n\r\n      <!-- 热门推荐 -->\r\n      <HotPanel :list=\"hotRecommendList\" />\r\n\r\n      <!-- 猜你喜欢 -->\r\n      <XtxGuess ref=\"guessRef\" />\r\n    </template>\r\n  </scroll-view>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\npage {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  background-color: #f7f7f7;\r\n\r\n  .scroll-view {\r\n    flex: 1;\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Temp/uniapp/rabbit-uniapp/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getHomeCategoryAPI","getHomeHotRecommendAPI","onLoad","useGuessList"],"mappings":";;;;;;;;;;;;;;;;;AAOA,MAAA,eAAyB,MAAA;AAIzB,MAAA,gBAA0B,MAAA;AAC1B,MAAA,WAAqB,MAAA;AACrB,MAAA,eAAyB,MAAA;;;;AAKnB,UAAA,YAAYA,kBAAI,KAAK;AAGrB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACvC,UAAM,oBAAoB,YAAY;AAC9B,YAAA,MAAM,MAAMC,cAAAA;AAClB,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAInB,UAAA,eAAeD,kBAAoB,CAAA,CAAE;AAC3C,UAAM,sBAAsB,YAAY;AAChC,YAAA,MAAM,MAAME,cAAAA;AAClB,mBAAa,QAAQ,IAAI;AAAA,IAAA;AAIrB,UAAA,mBAAmBF,kBAAwB,CAAA,CAAE;AACnD,UAAM,0BAA0B,YAAY;AACpC,YAAA,MAAM,MAAMG,cAAAA;AAClB,uBAAiB,QAAQ,IAAI;AAAA,IAAA;AAG/BC,kBAAAA,OAAO,YAAY;AACjB,gBAAU,QAAQ;AAClB,YAAM,QAAQ,IAAI;AAAA,QAChB,kBAAkB;AAAA,QAClB,oBAAoB;AAAA,QACpB,wBAAwB;AAAA,MAAA,CACzB;AACD,gBAAU,QAAQ;AAAA,IAAA,CACnB;AAGD,UAAM,EAAE,UAAU,gBAAgB,IAAGC,kBAAa,aAAA;AAE5C,UAAA,cAAcL,kBAAI,KAAK;AAC7B,UAAM,qBAAqB,YAAY;;AACrC,kBAAY,QAAQ;AACpB,gBAAU,QAAQ;AAClB,qBAAS,UAAT,mBAAgB;AAChB,YAAM,QAAQ,IAAI;AAAA,QAChB,kBAAkB;AAAA,QAClB,oBAAoB;AAAA,QACpB,wBAAwB;AAAA,SACxB,cAAS,UAAT,mBAAgB;AAAA,MAAoB,CACrC;AACD,kBAAY,QAAQ;AACpB,gBAAU,QAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjEpB,GAAG,WAAW,eAAe;"}